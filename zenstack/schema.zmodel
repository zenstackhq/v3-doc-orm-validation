datasource db {
    provider = 'sqlite'
}

enum Role {
    USER
    ADMIN
}

model User {
    id     Int    @id @default(autoincrement())
    email  String @unique @email @length(5, 80)
    age    Int    @gte(0) @lt(150)
    role   Role

    @@validate(role != 'ADMIN' || age >= 18, 'Admin must be an adult')
    @@validate(
        role != 'ADMIN' || endsWith(email, 'zenstack.dev'),
        'Admin must have a zenstack email'
    )
}
